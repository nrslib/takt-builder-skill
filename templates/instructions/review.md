# review — レビュー instruction テンプレート

> **用途**: parallel sub-step 内のレビュー（汎用）
> **使用エージェント**: architecture-reviewer, qa-reviewer, security-reviewer, frontend-reviewer, ai-antipattern-reviewer 等
> **特徴**: ペルソナがドメイン知識を持つため、instruction は最小限でよい

---

## テンプレート（基本形）

```
{カスタマイズ: レビューの焦点を1文で}
**{レビュー名}**のレビューに集中してください。
{カスタマイズ: 除外事項があれば}
AI特有の問題はレビューしないでください（ai_reviewムーブメントで行います）。

{カスタマイズ: 参照レポートがあれば}
**参照するレポート:**
- 計画: {report:plan.md}
- 実装スコープ: {report:coder-scope.md}

**レビュー観点:**
{カスタマイズ: ペルソナの専門性に応じた観点リスト}
- {観点1}
- {観点2}
- {観点3}
```

---

## バリエーション

### A. アーキテクチャレビュー

```
**アーキテクチャと設計**のレビューに集中してください。
AI特有の問題はレビューしないでください（ai_reviewムーブメントで行います）。

**参照するレポート:**
- 計画: {report:plan.md}
- 実装スコープ: {report:coder-scope.md}

**レビュー観点:**
- 計画/設計との整合性
- コード品質
- 変更スコープの適切性
- テストカバレッジ
- デッドコード
- 呼び出しチェーン検証
```

### B. AIレビュー（parallel sub-step）

```
AI特有の問題についてコードをレビューしてください:
- 仮定の検証
- もっともらしいが間違っているパターン
- 既存コードベースとの適合性
- スコープクリープの検出
```

### C. セキュリティレビュー

```
セキュリティの観点から変更をレビューしてください。以下の脆弱性をチェック:
- インジェクション攻撃（SQL, コマンド, XSS）
- 認証・認可の不備
- データ露出リスク
- 暗号化の弱点
```

### D. QAレビュー

```
品質保証の観点から変更をレビューしてください。

**レビュー観点:**
- テストカバレッジと品質
- テスト戦略（単体/統合/E2E）
- エラーハンドリング
- ログとモニタリング
- 保守性
```

---

## 設計原則

- **instruction は最小限に**: ペルソナが専門知識を持つので、instruction ではレビュー対象と焦点を指示するだけ
- **観点リストはペルソナと重複してよい**: instruction の観点リストはエージェントへのリマインダーとして機能する
- **除外事項を明記**: 他のレビュアーとの責務境界を instruction で指示する

---

## 典型的な rules

```yaml
rules:
  - condition: approved
  - condition: needs_fix
```
