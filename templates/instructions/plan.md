# plan — 計画 instruction テンプレート

> **用途**: タスク分析・要件整理・実装方針策定
> **使用エージェント**: planner, architect-planner
> **カスタマイズ箇所**: `{カスタマイズ:}` で示す

---

## テンプレート

```
タスクを分析し、実装方針を立ててください。

**注意:** Previous Responseがある場合は差し戻しのため、
その内容を踏まえて計画を見直してください（replan）。

{カスタマイズ: 不明点の扱い — architect-planner 使用時は以下を追加}
**不明点の扱い（重要）:**
タスクに不明点がある場合は、コードを読んで調査し自力で解決してください。
調査しても解決できない外部要因（ユーザーの意図が判断できない等）のみ「不明確」と判断してください。

**やること:**
1. タスクの要件を理解する
2. {カスタマイズ: 関連コード調査が必要なら追加}
3. 影響範囲を特定する
4. 実装アプローチを決める
```

---

## バリエーション

### A. 標準計画（planner 使用）

計画のみ。設計は architect ムーブメントに委譲。

### B. 計画+設計（architect-planner 使用）

architect ムーブメントを省略する軽量ピース向け。
planner の代わりに architect-planner を使い、計画内に設計判断を含める。
不明点の自力解決指示を追加。

---

## 典型的な rules

```yaml
rules:
  - condition: 要件が明確で実装可能
    next: {implement or architect}
  - condition: ユーザーが質問をしている（実装タスクではない）
    next: COMPLETE
  - condition: 要件が不明確、情報不足
    next: ABORT
```
